"use strict";function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(r,e){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)){var t=[],n=!0,a=!1,i=void 0;try{for(var s,d=r[Symbol.iterator]();!(n=(s=d.next()).done)&&(t.push(s.value),!e||t.length!==e);n=!0);}catch(r){a=!0,i=r}finally{try{n||null==d.return||d.return()}finally{if(a)throw i}}return t}}function _arrayWithHoles(r){if(Array.isArray(r))return r}var bcrypt=require("bcryptjs"),db=require("../database/config");function add(e){var t,n,a;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(bcrypt.hash(e.password,14));case 2:return e.password=r.sent,r.next=5,regeneratorRuntime.awrap(db("users").insert(e));case 5:return t=r.sent,n=_slicedToArray(t,1),a=n[0],r.abrupt("return",findById(a));case 9:case"end":return r.stop()}})}function find(){return db("users").select("id","username","department")}function findBy(r){return db("users").select("id","username","password","department").where(r)}function findById(r){return db("users").select("id","username","department").where({id:r}).first()}module.exports={add:add,find:find,findBy:findBy,findById:findById};